# ==============================================
# Qwen Image Service - 主配置文件
# ==============================================
# 此文件中的配置可以被环境变量覆盖

app:
  name: "Qwen 多模态图像API服务"
  description: "集成文生图(Qwen-Image-2512)和图像编辑(Qwen-Image-Edit-2511)功能"
  version: "1.0.0"
  host: "0.0.0.0"
  port: 8000
  debug: false

models:
  text_to_image:
    name: "Qwen/Qwen-Image-2512"
    description: "Qwen-Image-2512 文生图模型"
    capabilities:
      - "text-to-image"
      - "image generation"
  
  image_edit:
    name: "Qwen/Qwen-Image-Edit-2511"
    description: "Qwen-Image-Edit-2511 图像编辑模型"
    capabilities:
      - "image-to-image"
      - "image editing"
      - "multi-image composition"

  # 模型存储目录
  models_dir: "./models"

generation:
  # 默认推理参数
  default_num_inference_steps: 50
  default_guidance_scale: 7.5
  default_true_cfg_scale: 4.0
  
  # 默认图像尺寸
  default_width: 1024
  default_height: 1024
  
  # 推理步数限制
  min_inference_steps: 20
  max_inference_steps: 100
  
  # 每次请求最大生成图像数
  max_images_per_request: 4
  
  # 批量编辑最大提示数
  max_batch_prompts: 10

# 支持的宽高比及其对应尺寸
aspect_ratios:
  "1:1": [1024, 1024]
  "16:9": [1664, 928]
  "9:16": [928, 1664]
  "4:3": [1472, 1104]
  "3:4": [1104, 1472]
  "3:2": [1584, 1056]
  "2:3": [1056, 1584]

security:
  # 上传文件大小限制 (MB)
  max_upload_size_mb: 20
  
  # 允许的图像MIME类型
  allowed_image_types:
    - "image/jpeg"
    - "image/png"
    - "image/webp"
  
  # CORS配置
  cors:
    # 生产环境请指定具体域名
    origins:
      - "*"
    allow_credentials: true
    allow_methods:
      - "*"
    allow_headers:
      - "*"

logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  # 是否输出到文件
  file_enabled: false
  file_path: "./logs/app.log"

cleanup:
  # 是否启用自动清理临时文件
  enabled: true
  # 临时文件最大保留时间 (小时)
  max_age_hours: 24
  # 清理检查间隔 (分钟)
  check_interval_minutes: 60
